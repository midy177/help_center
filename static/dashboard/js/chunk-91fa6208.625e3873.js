(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-91fa6208"],{"2d1d":function(t,a,e){"use strict";e.d(a,"d",(function(){return r})),e.d(a,"e",(function(){return i})),e.d(a,"a",(function(){return o})),e.d(a,"c",(function(){return d})),e.d(a,"b",(function(){return s}));var n=e("e1d2"),r=function(){return n.a.request({url:"/adm/get_category",method:"get"})},i=function(t){return n.a.request({url:"/adm/get_category",method:"get",params:t})},o=function(t){return n.a.request({url:"/adm/add_category",method:"post",data:t})},d=function(t){return n.a.request({url:"/adm/mod_category",method:"post",data:t})},s=function(t){return n.a.request({url:"/adm/del_category",method:"post",data:t})}},f932:function(t,a,e){"use strict";e.r(a);var n=(e("b0c0"),e("2d1d")),r={data:function(){return{disableRadio:!1,langAll:[{key:"cn",value:"中文"},{key:"en",value:"英文"}],dataForm:{id:0,lang:"cn",name:"",intro:"",parent_id:1},dataRules:{name:[{required:!0,message:"请填写分名称",trigger:"blur",max:64}],intro:[{required:!0,message:"请填写分类介绍",trigger:"blur",max:128}]},loading:!1,cateList:[]}},methods:{getCateList:function(){var t=this;Object(n.e)({lang:this.dataForm.lang}).then((function(a){if(1===a.code){t.cateList=JSON.parse(JSON.stringify(a.data));for(var e=a.data.length,n=0;n<e;n++){var r=0,i=0,o=t.cateList[n].parent_id;for(t.cateList[n].cname=t.cateList[n].name;a.data[r].id===o&&a.data[r].lang===t.cateList[n].lang&&(o=a.data[r].parent_id,t.cateList[n].cname=a.data[r].name+">"+t.cateList[n].cname),!(1===o||i>6);)r>=e?(r=0,i++):r++}t.cateList.unshift({id:1,lang:"cn",name:"作为根分类",cname:"作为根分类",intro:"作为根分类",parent_id:1})}else t.$Message.error({content:a.data,duration:3})}))},emitReset:function(){},emitAdd:function(){var t=this;this.$refs.dataForm.validate((function(a){a&&(t.loading=!0,Object(n.a)(t.dataForm).then((function(a){t.loading=!1,1===a.code?t.$Message.success({content:"添加成功",onClose:function(){t.$router.push({name:"cate-list"})}}):t.$Message.error({content:a.data,duration:3})})))}))}},mounted:function(){var t=parseInt(this.$route.params.id);0===t||isNaN(t)?this.dataForm.id=(new Date).getTime():(this.dataForm.id=t,this.disableRadio=!0);var a=parseInt(this.$route.params.pid);a>1&&!isNaN(a)?(this.dataForm.parent_id=a,this.disableRadio=!0):this.dataForm.parent_id=1;var e=this.$route.params.lang;""!==e&&void 0!==e&&(this.dataForm.lang=e,this.disableRadio=!0),this.getCateList()}},i=e("2877"),o=Object(i.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Card",{attrs:{bordered:!1,"dis-hover":""}},[e("p",{attrs:{slot:"title"},slot:"title"},[e("Icon",{attrs:{type:"ios-add-circle-outline"}}),t._v(" 添加分类 ")],1),e("div",{staticStyle:{"max-width":"100%"}},[e("Form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRules,"label-position":"top"}},[e("FormItem",{attrs:{label:"语言"}},[e("RadioGroup",{on:{"on-change":t.getCateList},model:{value:t.dataForm.lang,callback:function(a){t.$set(t.dataForm,"lang",a)},expression:"dataForm.lang"}},t._l(t.langAll,(function(a){return e("Radio",{key:a.key,attrs:{label:"cate",label:a.key,disabled:t.disableRadio}},[t._v("["+t._s(a.value)+"]")])})),1)],1),e("FormItem",{attrs:{label:"分类名称",prop:"name"}},[e("Input",{attrs:{maxlength:"64","show-word-limit":"",placeholder:"请填写分类名称"},model:{value:t.dataForm.name,callback:function(a){t.$set(t.dataForm,"name",a)},expression:"dataForm.name"}})],1),e("FormItem",{attrs:{label:"所属父级分类",prop:"parent_id"}},[e("Select",{model:{value:t.dataForm.parent_id,callback:function(a){t.$set(t.dataForm,"parent_id",a)},expression:"dataForm.parent_id"}},t._l(t.cateList,(function(a){return e("Option",{key:a.id+"-"+a.lang,attrs:{value:a.id}},[t._v(t._s(a.cname))])})),1)],1),e("FormItem",{attrs:{label:"分类介绍",prop:"intro"}},[e("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},maxlength:"128","show-word-limit":"",placeholder:"请填写分类介绍"},model:{value:t.dataForm.intro,callback:function(a){t.$set(t.dataForm,"intro",a)},expression:"dataForm.intro"}})],1),e("FormItem",[e("Button",{attrs:{type:"warning",loading:t.loading},on:{click:t.emitAdd}},[t._v("提交保存")]),e("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(a){return t.emitReset()}}},[t._v("重置填写")]),e("Button",{staticStyle:{"margin-left":"10px"},attrs:{to:{name:"cate-list"}}},[t._v("返回列表")])],1)],1)],1)])}),[],!1,null,null,null);a.default=o.exports}}]);